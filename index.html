<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AFERPAMA ‚Äî Constru√ß√£o e Engenharia</title>

  <!-- Descri√ß√£o e SEO -->
  <meta name="description" content="AFERPAMA ‚Äî Constru√ß√£o, Reabilita√ß√£o e Acompanhamento T√©cnico. Excel√™ncia e detalhe em cada projeto.">
  <meta name="keywords" content="constru√ß√£o civil, empreiteiro, obras, reabilita√ß√£o, auditoria t√©cnica, engenharia, aferpama, Pa√ßos de Ferreira, constru√ß√£o Portugal">
  <link rel="canonical" href="https://aferpama.com">

  <!-- Open Graph -->
  <meta property="og:title" content="AFERPAMA ‚Äî Constru√ß√£o e Engenharia">
  <meta property="og:description" content="Obras, reabilita√ß√£o e auditoria t√©cnica com rigor e qualidade.">
  <meta property="og:image" content="https://aferpama.com/assets/og-image.webp">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://aferpama.com">

  <!-- Twitter Cards -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="AFERPAMA ‚Äî Constru√ß√£o e Engenharia">
  <meta name="twitter:description" content="Constru√ß√£o, reabilita√ß√£o e acompanhamento t√©cnico com excel√™ncia.">
  <meta name="twitter:image" content="https://aferpama.com/assets/og-image.webp">

  <!-- iOS meta √∫teis -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="assets/black background.png">
  <link rel="icon" type="image/png" href="assets/favicon.png">

  <!-- Estilos -->
  <link rel="stylesheet" href="style.css" />

  <!-- Dados estruturados JSON-LD -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "ConstructionCompany",
    "name": "AFERPAMA ‚Äî Soc. de Constru√ß√µes, Lda",
    "image": "https://aferpama.com/assets/og-image.webp",
    "url": "https://aferpama.com",
    "telephone": "+351916884748",
    "email": "geral@aferpama.com",
    "address": {
      "@type": "PostalAddress",
      "streetAddress": "Fraz√£o",
      "addressLocality": "Pa√ßos de Ferreira",
      "addressRegion": "Porto",
      "postalCode": "4590",
      "addressCountry": "PT"
    },
    "sameAs": [
      "https://web.facebook.com/aferpama",
      "https://www.linkedin.com/company/aferpama"
    ]
  }
  </script>
</head>

<body>
  <!-- ===== HEADER ===== -->
  <header>
    <div class="header-container">
      <a href="#top" class="logo-link">
        <img src="assets/black background.png" alt="AFERPAMA Logo" class="logo-img">
      </a>

      <!-- √çcone hamb√∫rguer -->
      <button class="menu-toggle" aria-label="Abrir menu" aria-expanded="false" aria-controls="mobileNav">
        <span></span><span></span><span></span>
      </button>
    </div>
  </header>

  <!-- ===== MENU LATERAL ===== -->
  <nav id="mobileNav" class="mobile-nav" aria-hidden="true">
    <a href="sobre.html">Sobre</a>
    <a href="#servicos">Servi√ßos</a>
    <a href="#portfolio">Portef√≥lio</a>
    <a href="#contacto">Contacto</a>
    <a href="blog.html">Blog</a>
  </nav>
  <div class="menu-overlay"></div>
  <main>

  <!-- ===== INTRO (CITA√á√ÉO) ===== -->
  <section class="intro" id="top">
    <blockquote id="quote">
      ‚ÄúEdifica como se vivesses para sempre...
      <span class="segundo">...mas vive como se a morte estivesse pr√≥xima."</span>
      <cite>‚Äì A. Andrade, 1948</cite>
    </blockquote>
  </section>

  <!-- ===== HERO ===== -->
  <section class="hero" id="hero">
    <div class="hero-bg" aria-hidden="true"></div>
    <div class="hero-content">
      <h1>Obras que resistem ao tempo</h1>
      <h2>Excel√™ncia, Durabilidade, Precis√£o</h2>
    </div>
  </section>

  <!-- ===== SOBRE ===== -->
  <section id="sobre">
    <div class="sobre-container">
      <h2 class="sobre-titulo">O tempo ensina a construir</h2>
      
      <p>A constru√ß√£o faz parte da nossa identidade.</p>

      <p>A experi√™ncia acumulada ao longo de d√©cadas, aliada √† vis√£o das novas gera√ß√µes.</p>

      <p>Na AFERPAMA, o conhecimento t√©cnico e o sentido de responsabilidade caminham lado a lado com a precis√£o, o rigor e a durabilidade.</p>

      <div class="sobre-impacto" aria-label="Mensagem de impacto">
        <h3 class="line">Constru√≠mos confian√ßa</h3>
        <h3 class="line middle">obra ap√≥s obra</h3>
        <h3 class="line">gera√ß√£o ap√≥s gera√ß√£o</h3>
      </div>
    </div>
  </section>

  <!-- ===== SERVI√áOS ===== -->
  <section id="servicos">
    <h2>Servi√ßos</h2>
    <div class="servicos-grid">
      <a class="servico-card" data-servico="construimos" style="--bg-image: url('assets/construimos.webp')">
        <h3>Constru√≠mos</h3>
      </a>
      <a class="servico-card" data-servico="reabilitamos" style="--bg-image: url('assets/reabilitamos.webp')">
        <h3>Reabilitamos</h3>
      </a>
      <a class="servico-card" data-servico="guiamos" style="--bg-image: url('assets/guiamos.webp')">
        <h3>Guiamos o Seu Projeto</h3>
      </a>
    </div>
  </section>

  <!-- Modal Servi√ßos -->
  <div id="servicoModal" class="modal-servico">
    <div class="modal-content">
      <span class="close-modal">&times;</span>
      <h2 id="modal-title"></h2>
      <p id="modal-text"></p>
    </div>
  </div>
  
  <!-- ===== PORTEF√ìLIO ===== -->
  <section id="portfolio">
    <h2>Portef√≥lio</h2>
    <div class="portfolio-grid">
      <div class="portfolio-item" role="button" tabindex="0"
           data-gallery='["assets/obra1-1A.webp","assets/obra1-2A.webp","assets/obra1-3A.webp","assets/obra1-4A.webp","assets/obra1-5A.webp","assets/obra1-6A.webp"]'>
        <img src="assets/obra1A.webp" alt="Obra 1">
        <h3>A.S. Brisa ‚Äì Estremoz</h3>
      </div>

      <div class="portfolio-item" role="button" tabindex="0"
           data-gallery='["assets/obra2-1A.webp","assets/obra2-2A.webp","assets/obra2-3A.webp","assets/obra2-4A.webp","assets/obra2-5A.webp","assets/obra2-6A.webp"]'>
        <img src="assets/obra2A.webp" alt="Obra 2">
        <h3>Privado ‚Äì Pa√ßos de Ferreira</h3>
      </div>

      <div class="portfolio-item" role="button" tabindex="0"
           data-gallery='["assets/obra3-1.webp","assets/obra3-2.webp","assets/obra3-3.webp","assets/obra3-4.webp","assets/obra3-5.webp","assets/obra3-6.webp"]'>
        <img src="assets/obra3.webp" alt="Obra 3">
        <h3>Privado ‚Äì Cascais</h3>
      </div>

      <div class="portfolio-item" role="button" tabindex="0"
           data-gallery='["assets/obra4-1.webp","assets/obra4-2.webp","assets/obra4-3.webp","assets/obra4-4.webp","assets/obra4-5.webp","assets/obra4-6.webp"]'>
        <img src="assets/obra4.webp" alt="Obra 4">
        <h3>Compila√ß√£o</h3>
      </div>

    </div>
  </section>
  

  <!-- ===== CLIENTES E PARCEIROS ===== -->
  <section id="clientes">
    <h2>Clientes &amp; Parceiros</h2>
    <div class="logos-slider">
    <div class="logos-track">
      <!-- Primeira volta -->
      <a href="https://grupobrisa.pt/" target="_blank" rel="noopener"><img src="assets/brisa.png" alt="Brisa"></a>
      <a href="https://ogb.pt/" target="_blank" rel="noopener"><img src="assets/ogb.png" alt="Ogb"></a>
      <a href="https://www.volkswagenautoeuropa.pt/" target="_blank" rel="noopener"><img src="assets/autoeuropa.png" alt="Autoeuropa"></a>
      <a href="https://www.sotecnica.pt/" target="_blank" rel="noopener"><img src="assets/sotecnica.png" alt="Sot√©cnica"></a>
      <a href="https://web.facebook.com/reclart.publicidade/?locale=pt_PT&amp;_rdc=1&amp;_rdr" target="_blank" rel="noopener"><img src="assets/reclart.png" alt="Reclart"></a>
      <a href="https://www.feelslikehome.pt" target="_blank" rel="noopener"><img src="assets/flh.png" alt="FLH"></a>
      <a href="https://www.inlinea.pt/" target="_blank" rel="noopener"><img src="assets/inlinea.png" alt="Inlinea"></a>
      <a href="https://famo.pt/pt" target="_blank" rel="noopener"><img src="assets/famo.png" alt="Famo"></a>
      <a href="https://web.facebook.com/saramartinscalcao/?_rdc=1&_rdr" target="_blank" rel="noopener"><img src="assets/shortysteps.png" alt="Shorty Steps"></a>
      <a href="https://www.tripadvisor.pt/Restaurant_Review-g189180-d12514591-Reviews-Intrigo-Porto_Porto_District_Northern_Portugal.html" target="_blank" rel="noopener"><img src="assets/intrigo.png" alt="Intrigo"></a>
      <a href="https://www.inchainlogistics.com/" target="_blank" rel="noopener"><img src="assets/inchainlogistics.png" alt="Inchain Logistics"></a>

      <!-- Segunda volta (duplica√ß√£o para loop cont√≠nuo) -->
      <a href="https://grupobrisa.pt/" target="_blank" rel="noopener"><img src="assets/brisa.png" alt="Brisa"></a>
      <a href="https://ogb.pt/" target="_blank" rel="noopener"><img src="assets/ogb.png" alt="Ogb"></a>
      <a href="https://www.volkswagenautoeuropa.pt/" target="_blank" rel="noopener"><img src="assets/autoeuropa.png" alt="Autoeuropa"></a>
      <a href="https://www.sotecnica.pt/" target="_blank" rel="noopener"><img src="assets/sotecnica.png" alt="Sot√©cnica"></a>
      <a href="https://web.facebook.com/reclart.publicidade/?locale=pt_PT&amp;_rdc=1&amp;_rdr" target="_blank" rel="noopener"><img src="assets/reclart.png" alt="Reclart"></a>
      <a href="https://www.flh.pt/" target="_blank" rel="noopener"><img src="assets/flh.png" alt="FLH"></a>
      <a href="https://www.inlinea.pt/" target="_blank" rel="noopener"><img src="assets/inlinea.png" alt="Inlinea"></a>
      <a href="https://famo.pt/pt" target="_blank" rel="noopener"><img src="assets/famo.png" alt="Famo"></a>
      <a href="https://web.facebook.com/saramartinscalcao/?_rdc=1&_rdr" target="_blank" rel="noopener"><img src="assets/shortysteps.png" alt="Shorty Steps"></a>
      <a href="https://www.tripadvisor.pt/Restaurant_Review-g189180-d12514591-Reviews-Intrigo-Porto_Porto_District_Northern_Portugal.html" target="_blank" rel="noopener"><img src="assets/intrigo.png" alt="Intrigo"></a>
      <a href="https://www.inchainlogistics.com/" target="_blank" rel="noopener"><img src="assets/inchainlogistics.png" alt="Inchain Logistics"></a>
    </div>
    </div>
  </section>
  
  <!-- ===== CONTACTO ===== -->
  <section id="contacto">
    <div class="conteudo">
      <h2>Contacto</h2>
    <p>Email: <a href="mailto:geral@aferpama.com">geral@aferpama.com</a></p>
    <p>Telefone / WhatsApp: <a href="https://wa.me/351916884748" target="_blank" rel="noopener">+351 916 884 748</a></p>
    <p><strong>Sede:</strong> <a href="https://maps.app.goo.gl/2Wrh8zTceCXNWmY57" target="_blank" rel="noopener">Ver localiza√ß√£o no mapa</a></p>
    <div class="mapa">
      <iframe
        src="https://www.google.com/maps?q=AFERPAMA+-+Soc.+de+Constru√ß√µes,+lda,+Fraz√£o,+Portugal&t=k&z=18&output=embed"
        width="100%" height="350" style="border:0;" allowfullscreen loading="lazy"
        referrerpolicy="no-referrer-when-downgrade">
      </iframe>
    </div>
  </section>

  <!-- ===== FOOTER ===== -->
  </main>
  <footer>
    <span class="footer-left">&copy; 2025 Aferpama ‚Äì NIF: 515686263</span>
    <span class="footer-right">Certificado de Empreiteiro n.¬∫150540-PUB</span>
  </footer>

  <style>
    .modal-servico {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.8);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 3000;
      padding: 20px;
    }
    .modal-servico.show {
      display: flex;
    }
    .modal-content {
      background: #111;
      color: #fff;
      max-width: 500px;
      padding: 30px;
      border-radius: 10px;
      text-align: center;
      box-shadow: 0 0 20px rgba(255, 0, 0, 0.3);
      position: relative;
    }
    .modal-content h2 {
      margin-bottom: 15px;
    }
    .close-modal {
      position: absolute;
      top: 20px;
      right: 25px;
      font-size: 28px;
      cursor: pointer;
      color: #fff;
    }
    .close-modal:hover {
      color: #ff4c4c;
    }
    /* === SOBRE: layout e visibilidade === */
    #sobre {
      background: #000;
      color: #fff;
      text-align: center;
      padding: 40px 0 60px 0;
      position: relative;
      z-index: 2;
    }

    @media (max-width: 900px) {
      #sobre {
        padding: 20px 10px 40px 10px !important;
      }
    }

    .sobre-container {
      max-width: 900px;
      margin: 0 auto;
      padding: 0 20px;
    }

    #sobre h2, #sobre p {
      opacity: 1 !important;
      transform: none !important;
      transition: none !important;
    }

    @media (max-width: 900px) {
      #sobre {
        padding: 40px 20px 60px 20px; /* reduz espa√ßo superior no mobile */
      }
      #sobre .sobre-container {
        margin-top: 0;
      }
      #sobre h2 {
        margin-bottom: 10px;
      }
      #sobre p {
        margin-top: 8px;
        margin-bottom: 8px;
      }
    }
    /* === SERVI√áOS - cart√µes interativos === */
    .servicos-grid {
      display: flex;
      justify-content: center;
      gap: 40px;
      margin-top: 60px;
      flex-wrap: wrap;
    }

    .servico-card {
      position: relative;
      width: 300px;
      height: 200px;
      background: #1a1a1a;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 6px;
      overflow: hidden;
      text-decoration: none;
      transition: transform 0.3s ease;
    }

    .servico-card h3 {
      color: #fff;
      font-size: 24px;
      font-weight: 600;
      z-index: 2;
      text-align: center;
    }

    .servico-card::before {
      content: "";
      position: absolute;
      inset: 0;
      background: var(--bg-image) center/cover no-repeat;
      opacity: 0;
      transition: opacity 0.4s ease;
      z-index: 1;
    }

    .servico-card:hover::before {
      opacity: 0.35; /* opacidade da imagem no hover */
    }

    .servico-card:hover {
      transform: scale(1.03);
    }

    @media (max-width: 900px) {
      .servicos-grid {
        gap: 20px;
      }
      .servico-card {
        width: 100%;
        max-width: 320px;
      }
    }
    .menu-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.45);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
      z-index: 900;
    }
    .mobile-nav.open + .menu-overlay {
      opacity: 1;
      pointer-events: all;
    }

    /* Estado inicial do hero */
    .hero-content {
      opacity: 0;
      transform: translateY(60px);
      transition: opacity 0.6s ease-out, transform 0.6s ease-out;
    }

    /* === HERO: responsivo mobile === */
    @media (max-width: 768px) {
      .hero-content h1 {
        font-size: 1.8rem !important;
        line-height: 1.2;
        padding: 0 10px;
      }

      .hero-content h2 {
        font-size: 1rem !important;
        line-height: 1.3;
        padding: 0 15px;
      }

      .hero {
        min-height: 90dvh;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
      }

      footer.visible {
        position: static;
      }
    }


  </style>

  <!-- ===== SCRIPTS ===== -->
  <script>
  document.addEventListener("DOMContentLoaded", () => {
    const modal = document.getElementById("servicoModal");
    const title = document.getElementById("modal-title");
    const text = document.getElementById("modal-text");
    const closeBtn = document.querySelector(".close-modal");

    const textos = {
      construimos: "A AFERPAMA executa obras de raiz, com foco em qualidade, rigor t√©cnico e durabilidade. Desde as funda√ß√µes at√© aos acabamentos, garantimos uma constru√ß√£o s√≥lida e eficiente.",
      reabilitamos: "Reabilitamos edif√≠cios e infraestruturas preservando o car√°ter original, mas introduzindo conforto e tecnologia atuais. Cada detalhe √© tratado com precis√£o e respeito pela hist√≥ria da obra.",
      guiamos: "Prestamos consultoria e acompanhamento t√©cnico em todas as fases de obra ‚Äî planeamento, execu√ß√£o e auditoria ‚Äî assegurando a conformidade e o controlo de qualidade."
    };

    document.querySelectorAll(".servico-card").forEach(card => {
      card.addEventListener("click", () => {
        const servico = card.getAttribute("data-servico");
        title.textContent = card.textContent.trim();
        text.textContent = textos[servico] || "";
        modal.classList.add("show");
      });
    });

    closeBtn.addEventListener("click", () => modal.classList.remove("show"));
    modal.addEventListener("click", (e) => { if (e.target === modal) modal.classList.remove("show"); });
  });
  </script>
  <script>
    // For√ßa sempre o topo no refresh / navega√ß√£o
    window.history.scrollRestoration = "manual";
    window.addEventListener("load", () => {
      setTimeout(() => window.scrollTo({ top: 0, behavior: "instant" }), 50);
    });
    window.addEventListener("beforeunload", () => window.scrollTo(0, 0));

    // Orquestra√ß√£o: cita√ß√£o ‚Üí header e footer
    window.addEventListener("DOMContentLoaded", () => {
      const quote  = document.getElementById('quote');
      const header = document.querySelector('header');
      const footer = document.querySelector('footer');

      setTimeout(() => quote.classList.add('visible'), 200);
      setTimeout(() => { header.classList.add('visible'); footer.classList.add('visible'); }, 3200);
    });

    // Logo leva ao topo
    const logo = document.querySelector(".logo-link");
    if (logo) {
      logo.addEventListener("click", (e) => {
        e.preventDefault();
        window.scrollTo({ top: 0, behavior: "smooth" });
      });
    }

    // Hamburguer: abre/fecha menu lateral e trava scroll
    (function () {
      const toggle = document.querySelector('.menu-toggle');
      const mobileNav = document.getElementById('mobileNav');
      const body = document.body;

      function openMenu() {
        toggle.classList.add('active');
        toggle.setAttribute('aria-expanded', 'true');
        mobileNav.classList.add('open');
        mobileNav.setAttribute('aria-hidden', 'false');
        body.classList.add('no-scroll');
      }

      function closeMenu() {
        toggle.classList.remove('active');
        toggle.setAttribute('aria-expanded', 'false');
        mobileNav.classList.remove('open');
        mobileNav.setAttribute('aria-hidden', 'true');
        body.classList.remove('no-scroll');
      }

      toggle.addEventListener('click', () => {
        const isOpen = mobileNav.classList.contains('open');
        isOpen ? closeMenu() : openMenu();
      });

      mobileNav.querySelectorAll('a').forEach(a => a.addEventListener('click', closeMenu));
    }());

    // Overlay: fecha menu ao clicar fora
    const overlay = document.querySelector('.menu-overlay');
    overlay.addEventListener('click', () => {
      document.querySelector('.menu-toggle').classList.remove('active');
      document.querySelector('#mobileNav').classList.remove('open');
      document.body.classList.remove('no-scroll');
    });

    // === HERO: fade-in + subida (robusto em desktop e mobile) ===
    (function() {
      const hero = document.querySelector('.hero');
      const heroContent = document.querySelector('.hero-content');
      if (!hero || !heroContent) return;

      // Estado inicial
      heroContent.style.opacity = '0';
      heroContent.style.transform = 'translateY(40px)';
      heroContent.style.transition = 'opacity 0.72s ease-out, transform 0.72s ease-out';

      const reveal = () => {
        heroContent.style.opacity = '1';
        heroContent.style.transform = 'translateY(0)';
      };

      // S√≥ revela automaticamente se o hero preencher praticamente todo o ecr√£ (mobile)
      const rect = hero.getBoundingClientRect();
      const vh = window.innerHeight || document.documentElement.clientHeight;
      if (rect.top < vh * 1 && rect.bottom > vh * 0) {
        requestAnimationFrame(reveal);
        return;
      }

      // Observa a interse√ß√£o com threshold e rootMargin ajustados
      const observer = new IntersectionObserver((entries, obs) => {
        entries.forEach(entry => {
          if (entry.isIntersecting && entry.intersectionRatio >= 0.3) {
            reveal();
            obs.disconnect();
          }
        });
      }, { threshold: [0.3], rootMargin: '0px 0px -40% 0px' });

      observer.observe(hero);
    })();
      
  </script>

  <!-- ===== SETA PARA SCROLL ===== -->
  <div class="scroll-arrow"></div>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const arrow = document.querySelector(".scroll-arrow");
      const hero = document.querySelector(".hero");
      if (!arrow || !hero) return;

      // Mostra a seta ap√≥s 3s
      setTimeout(() => arrow.classList.add("show"), 3000);

      // Remove a seta apenas quando o utilizador ultrapassa a sec√ß√£o hero
      window.addEventListener("scroll", () => {
        const heroBottom = hero.getBoundingClientRect().bottom;
        if (heroBottom < window.innerHeight * 0.95) {
          arrow.classList.remove("show");
        }
      });
    });
  </script>
</body>

<!-- ===== LIGHTBOX OVERLAY ===== -->
<div class="lightbox" tabindex="-1" aria-modal="true" style="display:none;">
  <button class="lb-close" aria-label="Fechar">&times;</button>
  <button class="lb-prev" aria-label="Anterior">&#10094;</button>
  <img class="lb-img" src="" alt="Imagem do portef√≥lio">
  <button class="lb-next" aria-label="Seguinte">&#10095;</button>
  <h3 class="lb-title"></h3>
  <div class="lb-counter"></div>
</div>
<style>
  .lightbox .lb-title {
    position: absolute;
    top: 24px;
    left: 50%;
    transform: translateX(-50%);
    color: #fff;
    font-size: 18px;
    font-weight: 500;
    letter-spacing: 0.5px;
    text-align: center;
    opacity: 0.9;
    background: rgba(0, 0, 0, 0.4);
    padding: 6px 16px;
    border-radius: 6px;
    z-index: 10002;
  }
  @media (max-width: 900px) {
    .lightbox .lb-title {
      top: 16px;
      font-size: 16px;
      padding: 4px 12px;
    }
  }
.lightbox {
  position: fixed;
  inset: 0;
  z-index: 2000;
  background: rgba(0,0,0,0.92);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  transition: opacity 0.3s;
  opacity: 0;
  pointer-events: none;
}
.lightbox.open {
  opacity: 1;
  pointer-events: all;
  display: flex;
}
  .lightbox .lb-img {
    width: auto;
    height: auto;
    max-width: 95vw;
    max-height: 80vh;
    object-fit: contain;
    border-radius: 10px;
    box-shadow: 0 8px 40px 0 #000a;
    background: #111;
    margin-bottom: 18px;
  }
.lightbox .lb-close {
  position: absolute;
  top: 30px;
  right: 40px;
  background: none;
  border: none;
  font-size: 46px;
  color: #fff;
  cursor: pointer;
  z-index: 10;
  transition: color 0.2s;
}
.lightbox .lb-close:hover { color: #ffb300; }
.lightbox .lb-prev,
.lightbox .lb-next {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background: rgba(20,20,20,0.7);
  border: none;
  color: #fff;
  font-size: 44px;
  padding: 10px 18px;
  border-radius: 50%;
  cursor: pointer;
  z-index: 10;
  transition: background 0.2s, color 0.2s;
}
.lightbox .lb-prev { left: 32px; }
.lightbox .lb-next { right: 32px; }
.lightbox .lb-prev:hover,
.lightbox .lb-next:hover { background: #fff; color: #111; }
.lightbox .lb-counter {
  color: #fff;
  font-size: 18px;
  margin-top: 4px;
  letter-spacing: 1px;
  background: rgba(0,0,0,0.3);
  padding: 4px 16px;
  border-radius: 8px;
}
@media (max-width: 700px) {
  .lightbox .lb-img { max-width: 98vw; max-height: 60vh; }
  .lightbox .lb-prev, .lightbox .lb-next {
    font-size: 32px;
    padding: 6px 12px;
    left: 8px;
    right: 8px;
  }
  .lightbox .lb-prev { left: 8px; }
  .lightbox .lb-next { right: 8px; }
  .lightbox .lb-close { top: 16px; right: 16px; font-size: 32px;}
}
</style>
<script>
(function(){
  const lightbox = document.querySelector('.lightbox');
  const lbImg = lightbox.querySelector('.lb-img');
  const lbClose = lightbox.querySelector('.lb-close');
  const lbPrev = lightbox.querySelector('.lb-prev');
  const lbNext = lightbox.querySelector('.lb-next');
  const lbCounter = lightbox.querySelector('.lb-counter');

  let gallery = [];
  let current = 0;

  function openLightbox(imgs, startIndex=0){
    gallery = imgs;
    current = startIndex;
    preloadImages(gallery); // üëà pr√©-carrega todas as imagens
    updateImage();
    updateTitle();
    lightbox.classList.add('open');
    lightbox.style.display = 'flex';
    document.body.style.overflow = 'hidden';
    setTimeout(()=> lightbox.focus(), 10);
  }

  // === Novo: pr√©-carregamento de imagens ===
  function preloadImages(list) {
    list.forEach(src => {
      const img = new Image();
      img.src = src;
    });
  }

  function closeLightbox(){
    lightbox.classList.remove('open');
    setTimeout(()=>{ lightbox.style.display = 'none'; }, 250);
    lbImg.src = '';
    document.body.style.overflow = '';
  }

  function updateTitle(){
    // T√≠tulo fixo baseado no √°lbum atual, n√£o muda por foto
    const lbTitle = document.querySelector('.lb-title');
    if (lbTitle && gallery.length) {
      // Tenta identificar o √°lbum atual pelo conte√∫do da galeria
      const allItems = document.querySelectorAll('.portfolio-item');
      let matchedItem = null;
      allItems.forEach(item => {
        const data = item.getAttribute('data-gallery');
        if (data && data.includes(gallery[0])) {
          matchedItem = item;
        }
      });
      const albumTitle = matchedItem ? matchedItem.querySelector('h3')?.textContent.trim() : '';
      lbTitle.textContent = albumTitle;
    }
  }

  function updateImage(){
    if (!gallery || !gallery.length) return;
    const src = gallery[current];
    lbImg.src = src;
    lbImg.alt = 'Imagem ' + (current+1) + ' de ' + gallery.length;
    lbCounter.textContent = (current+1) + ' / ' + gallery.length;
  }

  function next(){ if (!gallery.length) return; current = (current+1) % gallery.length; updateImage(); }
  function prev(){ if (!gallery.length) return; current = (current-1+gallery.length) % gallery.length; updateImage(); }

  // Liga cada obra
  document.querySelectorAll('.portfolio-item').forEach((item)=>{
    item.addEventListener('click', ()=>{
      const data = item.getAttribute('data-gallery');
      let imgs = [];
      try { imgs = JSON.parse(data); } catch(e) { imgs = []; }
      if (!imgs || !imgs.length) {
        const fallback = item.querySelector('img')?.getAttribute('src');
        if (fallback) imgs = [fallback];
      }
      openLightbox(imgs, 0);
    });

    item.addEventListener('keydown', (e)=>{
      if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); item.click(); }
    });
  });

  // Controles
  lbClose.addEventListener('click', closeLightbox);
  lbNext.addEventListener('click', next);
  lbPrev.addEventListener('click', prev);

  // Click fora fecha
  lightbox.addEventListener('mousedown', (e)=>{ if (e.target === lightbox) closeLightbox(); });

  // Teclado
  document.addEventListener('keydown', (e)=>{
    if (!lightbox.classList.contains('open')) return;
    if (e.key === 'Escape') closeLightbox();
    if (e.key === 'ArrowRight') next();
    if (e.key === 'ArrowLeft') prev();
  });
})();
</script>
</html>
